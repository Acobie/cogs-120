<!doctype html>

<html>

<head>
	<title>Gamer</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Kanit' rel='stylesheet'>
    <link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/bootstrap-theme.css">
    <link rel="stylesheet" href="css/custom-theme.css">
</head>

<body style="font-family:  Open Sans;">
    
    <!--
    <div class="navbar-collapse collapse" id="headerText">
		<span class="navbar-brand">
		</span>
	</div>
    -->

	
    <nav class="navbar navbar-static-top" style="background-color:#16141A">
        <a class="mr-auto" style="font-size: 35px; color:white;" href="./">&#x293A;</a>
    </nav>
     
    <div class="container">
        <div id="introHead">
            <div class="row align-items-center">
                <div class="col-10">
                <h4 class="text-light top-buffer"
                style="margin-left:10%;margin-bottom:2px;font-weight:300">Select Your Favorite</h4>
                <h4 class="text-light"
                style="margin-left:10%;font-family:'Kanit';font-weight:600">GAMING GENRES:</h4>
                </div>
                <div class="col-2">
                <!-- 
                    data-trigger="focus"
                -->
                <img src="https://i.imgur.com/Hz9jDk6.png" class="questionMark"
                id="helpMenu" data-container="body" data-toggle="popover"
                data-placement="bottom" title="Why are we asking?"
                data-content="We use this info to match you
                with new friends!" onclick="changeMenu(event)"> 
                </div>
            </div>
        <div>

        <div id="Action">
                
            <div class="row align-items-center top-buffer">
                
                    <img src="https://i.imgur.com/cUia8dp.png" id="Action1"
                    class="checkBox img-fluid" onclick="toggleButton(event)">
                    <h4 class="text-light" id="Action2" onclick="toggleButton(event)">Action</h4>

            </div>
        
        </div>
        
        <div id="Adventure">
                
            <div class="row align-items-center top-buffer">
                
                    <img src="https://i.imgur.com/cUia8dp.png" id="Adventure1"
                    class="checkBox img-fluid" onclick="toggleButton(event)">
                    <h4 class="text-light" id="Adventure2" onclick="toggleButton(event)">Adventure</h4>

            </div>
        
        </div>


        <div id="Casual">
                
            <div class="row align-items-center top-buffer">
                
                    <img src="https://i.imgur.com/cUia8dp.png" id="Casual1"
                    class="checkBox img-fluid" onclick="toggleButton(event)">
                    <h4 class="text-light" id="Casual2" onclick="toggleButton(event)">Casual</h4>

            </div>
        
        </div>
        
        <div id="Puzzle">
                
            <div class="row align-items-center top-buffer">
                
                    <img src="https://i.imgur.com/cUia8dp.png" id="Puzzle1"
                    class="checkBox img-fluid" onclick="toggleButton(event)">
                    <h4 class="text-light" id="Puzzle2" onclick="toggleButton(event)">Puzzle</h4>

            </div>
        
        </div>
        
        <div id="Racing">
                
            <div class="row align-items-center top-buffer">
                
                    <img src="https://i.imgur.com/cUia8dp.png" id="Racing1"
                    class="checkBox img-fluid" onclick="toggleButton(event)">
                    <h4 class="text-light" id="Racing2" onclick="toggleButton(event)">Racing</h4>

            </div>
        
        </div>
        
        <div id="RPG">
                
            <div class="row align-items-center top-buffer">
                
                    <img src="https://i.imgur.com/cUia8dp.png" id="RPG1"
                    class="checkBox img-fluid" onclick="toggleButton(event)">
                    <h4 class="text-light" id="RPG2" onclick="toggleButton(event)">RPG</h4>

            </div>
        
        </div>
        
        <div id="Sports">
                
            <div class="row align-items-center top-buffer">
                
                    <img src="https://i.imgur.com/cUia8dp.png" id="Sports1"
                    class="checkBox img-fluid" onclick="toggleButton(event)">
                    <h4 class="text-light" id="Sports2" onclick="toggleButton(event)">Sports</h4>

            </div>
        
        </div>
        
        <div id="Strategy">
                
            <div class="row align-items-center top-buffer">
                
                    <img src="https://i.imgur.com/cUia8dp.png" id="Strategy1"
                    class="checkBox img-fluid" onclick="toggleButton(event)">
                    <h4 class="text-light" id="Strategy2" onclick="toggleButton(event)">Strategy</h4>

            </div>
        
        </div>
        
        <!--
        <div class="row top-buffer">
            
            <div class="col">
                <div class="button" id="Action" onclick="toggleButton(event)">
                    <p class="buttonItem" id="Action">Action</p>
                </div>
            </div>
            
            <div class="col">
                <div class="button" id="Adventure" onclick="toggleButton(event)">
                    <p class="buttonItem" id="Adventure">Adventure</p>
                </div>
            </div>
        
        </div>
        
        <div class="row top-buffer">
            
            <div class="col">
                <div class="button" id="Casual" onclick="toggleButton(event)">
                    <p class="buttonItem" id="Casual">Casual</p>
                </div>
            </div>
            
            <div class="col">
                <div class="button" id="Puzzle" onclick="toggleButton(event)">
                    <p class="buttonItem" id="Puzzle">Puzzle</p>
                </div>
            </div>
        
        </div>
       
        <div class="row top-buffer">
            
            <div class="col">
                <div class="button" id="Racing" onclick="toggleButton(event)">
                    <p class="buttonItem" id="Racing">Racing</p>
                </div>
            </div>
            
            <div class="col">
                <div class="button" id="RPG" onclick="toggleButton(event)">
                    <p class="buttonItem" id="RPG">RPG</p>
                </div>
            </div>
        
        </div>
    
        <div class="row top-buffer">
            
            <div class="col">
                <div class="button" id="Sports" onclick="toggleButton(event)">
                    <p class="buttonItem" id="Sports">Sports</p>
                </div>
            </div>
            
            <div class="col">
                <div class="button" id="Strategy" onclick="toggleButton(event)">
                    <p class="buttonItem" id="Strategy">Strategy</p>
                </div>
            </div>
        
        </div>
        -->
    
    </div>
    
    <nav class="navbar fixed-bottom" id="nextMenu"
    style="background-color:#16141A">
        <a class="mr-auto" style="color: white" onclick="window.location.reload()">Clear</a>
        <a class="ml-auto" style="color:#FF007A" onclick="saveGenres(event)" href="./suggestions">NEXT</a>
    </nav>

    <script>

    var genres = ["0"];
    var genSize = 0;
    function toggleButton(e) {
        var picName = e.srcElement.id;
        var elem = picName.substring(0, picName.length-1);
        picName = elem + 1;
        console.log(picName);
        if(genres.includes(elem)){
            var ind = genres.indexOf(elem);

            document.getElementById(picName).src = "https://i.imgur.com/cUia8dp.png";

            genres[ind] = "0";
            /*
            document.getElementById(e.srcElement.id).style.backgroundColor = "#FFFFFF";
            document.getElementById(e.srcElement.id).style.boxShadow = 
            "7px 7px 8px rgba(0, 0, 0, 0.25)";
            */
            //document.getElementById("next-menu").style.visibility = "hidden";       
            genSize--;
            if(genSize == 0){
                $('#nextMenu').fadeOut(500);
            }
        }
        else {
            if(genres.includes("0")){
                var ind = genres.indexOf("0");
                genres[ind] = elem;
            }
            else{
                genres.push(elem);
            }
            document.getElementById('nextMenu').style.visibility = 'visible';       
            
            document.getElementById(picName).src = "https://i.imgur.com/t3bLAN1.png";
            /*
            document.getElementById(e.srcElement.id).style.backgroundColor = "#FF007A";
            document.getElementById(e.srcElement.id).style.boxShadow =
            "7px 7px 8px rgba(0, 0, 0, 0.25) inset";
            */
            genSize++;
            $('#nextMenu').fadeIn(500);
        }

    }

    //$.cookie('usrGenres', genres, {expires: 1}); // expires in 1 day
    //var id = $.cookie('usrGenres');
    

    </script>

    <script>
        function saveGenres(e) {
            localStorage.setItem('usrGenres', JSON.stringify(genres));
        }

        function changeMenu(e) {
            document.getElementById("helpMenu").src =
            "https://i.imgur.com/YAvPt5Z.png";
        }
    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="js/jquery-1.11.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <!--<script src="js/bootstrap.min.js"></script>-->
    <!--<script src="js/bootstrap.js"></script>-->
  
  <script>
    $(function () {
      $('[data-toggle="popover"]').popover({
       /*
       trigger: 'focus'   
       */
      })
    })
     
    $("html").on("mouseup", function (e) {
    var l = $(e.target);
    if (l[0].className.indexOf("popover") == -1) {
        $(".popover").each(function () {
            $(this).popover("hide");
            $('#helpMenu').attr("src", "https://i.imgur.com/Hz9jDk6.png");
        });
    }
});
  </script>

<script>
    db.ref("genres");
    var genreRef = ref.child("users");
    genreRef.set({
        likedGenres: genres 
    });

</script>

</body>

</html>
